"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[555],{2555:function(e,n,s){s.r(n),s.d(n,{default:function(){return m}});var t=s(2982),r=s(885),a={messagesContainer:"Messages_messagesContainer__L3Ial",messageImg:"Messages_messageImg__l3E12"},i=s(2791),u=s(4530),o=s(9813),c=s(184),l=function(){var e=(0,i.useState)(null),n=(0,r.Z)(e,2),s=n[0],t=n[1];return(0,i.useEffect)((function(){var e,n=function(){setTimeout(s,3e3)};function s(){var s,r;null===(s=e)||void 0===s||s.removeEventListener("close",n),null===(r=e)||void 0===r||r.close(),(e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx")).addEventListener("close",n),t(e)}return s(),function(){e.removeEventListener("close",n),e.close()}}),[]),(0,i.useEffect)((function(){}),[s]),(0,c.jsxs)("div",{children:[(0,c.jsx)(d,{ws:s}),(0,c.jsx)(f,{ws:s})]})},d=function(e){var n=e.ws,s=(0,i.useState)([]),u=(0,r.Z)(s,2),o=u[0],l=u[1],d=function(e){var n=JSON.parse(e.data);l((function(e){return[].concat((0,t.Z)(e),(0,t.Z)(n))}))};return(0,i.useEffect)((function(){return null===n||void 0===n||n.addEventListener("message",d),function(){null===n||void 0===n||n.removeEventListener("message",d)}}),[n]),(0,c.jsx)("div",{className:a.messagesContainer,children:o.map((function(e,n){return(0,c.jsx)(v,{message:e},n)}))})},v=function(e){var n=e.message;return(0,c.jsxs)("div",{children:[(0,c.jsx)("img",{src:n.photo,className:a.messageImg})," ",(0,c.jsx)("b",{children:n.userName}),(0,c.jsx)("br",{}),n.message,(0,c.jsx)("hr",{})]})},f=function(e){var n=e.ws,s=(0,i.useState)(""),t=(0,r.Z)(s,2),l=t[0],d=t[1],v=(0,i.useState)("pending"),f=(0,r.Z)(v,2),m=f[0],g=f[1];(0,i.useEffect)((function(){var e=function(){g("ready")};return null===n||void 0===n||n.addEventListener("open",e),function(){null===n||void 0===n||n.removeEventListener("open",e)}}),[n]);return(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:(0,c.jsx)(u.Z,{placeholder:"Enter yore message.",color:"info",variant:"outlined",sx:{mb:"10px",ml:"10px"},value:l,onChange:function(e){return d(e.currentTarget.value)}})}),(0,c.jsx)("div",{className:a.formCustomButton,children:(0,c.jsx)(o.o,{children:"Send",onClick:function(){l&&(null===n||void 0===n||n.send(l),d(""))},disabled:null===n&&"ready"!==m})})]})},m=function(){return(0,c.jsx)("div",{children:(0,c.jsx)(l,{})})}}}]);
//# sourceMappingURL=555.c683adbb.chunk.js.map